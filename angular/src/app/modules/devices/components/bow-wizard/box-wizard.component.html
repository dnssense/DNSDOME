<div class="row">
  <div class="col-md-12 ml-auto mr-auto">
    <div class="card">
      <div class="card-header card-header-text card-header-info">
        <div class="card-text">
          <h4 class="card-title">Box Information Details</h4>
          <p class="card-category">Manage this box settings</p>
        </div>
      </div>
      <div class="card-body">
        <form [formGroup]="boxForm" (ngSubmit)="boxFormSubmit()"  method="post">
          <div class="row">
            <div class="col-md-6">
              <mat-form-field>
                <input type="text" id="boxName" name="boxName" matInput id="text" placeholder="Box Name"
                  [value]="selectedBox?.host">
              </mat-form-field>
            </div>
          </div>
          <div class="row" *ngIf="selectedBox">
            <div class="col-md-6">
              <mat-form-field>
                <mat-select placeholder="Domain Profiles" [(ngModel)]="selectedBox?.location.profile.id" formControlName="domainProfile">
                  <mat-optgroup [label]="'System Domain Profiles'">
                    <mat-option [value]="profile.id" *ngFor="let profile of systemProfiles">
                      {{profile.name}}
                    </mat-option>
                  </mat-optgroup>
                  <mat-optgroup [label]="'User Domain Profiles'">
                    <mat-option [value]="profile.id" *ngFor="let profile of userProfiles">
                      {{profile.name}}
                    </mat-option>
                  </mat-optgroup>
                </mat-select>
              </mat-form-field>
              <mat-form-field>
                <mat-select placeholder="Application Profiles" [(ngModel)]="selectedBox?.location.appUserProfile.id" formControlName="appProfile">
                  <mat-optgroup [label]="'System Domain Profiles'">
                    <mat-option [value]="profile.id" *ngFor="let profile of applicationSystemProfiles">
                      {{profile.profileName}}
                    </mat-option>
                  </mat-optgroup>
                  <mat-optgroup [label]="'User Domain Profiles'">
                    <mat-option [value]="profile.id" *ngFor="let profile of applicationUserProfiles">
                      {{profile.profileName}}
                    </mat-option>
                  </mat-optgroup>
                </mat-select>
              </mat-form-field>
              <mat-form-field>
                <mat-select placeholder="Blacklist/Whitelist Profiles" [(ngModel)]="selectedBox?.location.bwList.id" formControlName="bwListProfile">
                  <mat-optgroup [label]="'System Domain Profiles'">
                    <mat-option [value]="profile.id" *ngFor="let profile of systemBWList">
                      {{profile.name}}
                    </mat-option>
                  </mat-optgroup>
                  <mat-optgroup [label]="'User Domain Profiles'">
                    <mat-option [value]="profile.id" *ngFor="let profile of userBWList">
                      {{profile.name}}
                    </mat-option>
                  </mat-optgroup>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field *ngIf="selectedBox?.location">
                <textarea type="text" id="blockMessage" name="blockMessage" matInput id="text"
                  [(ngModel)]="selectedBox?.location.blockMessage" placeholder="Block Message"
                  formControlName="blockMessage"></textarea>
              </mat-form-field>
              <div class="row">
                <div class="col-md-6">
                  <div class="togglebutton">
                    <label>Captive Portal
                      <ng-container *ngIf="selectedBox?.isCaptivePortal; else elseTemplate">
                        <input type="checkbox" checked (change)="manageETV()" formControlName="isCaptivePortal">
                        <span class="toggle"></span> On
                      </ng-container>
                      <ng-template #elseTemplate>
                        <input type="checkbox" (change)="manageETV()" formControlName="isCaptivePortal">
                        <span class="toggle"></span> Off
                      </ng-template>
                    </label>
                  </div>
                  <div *ngIf="selectedBox?.isCaptivePortal">
                    <mat-form-field class="example-full-width has-label" style="width:100%;">
                      <input type="text" maxlength="15" name="etvIp" (keydown)="checkIPNumber($event, etvIp)"
                        placeholder="IP" matInput [(ngModel)]="etvIp" formControlName="etvIp">
                      <mat-error *ngIf="boxForm.get('etvIp').hasError('required')">
                        Enter A Valid IP: <strong>127.0.0.1</strong>
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="row">
            <div class="col text-right ml-auto">
              <button type="submit" class="btn btn-info">Save</button>
            </div>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>