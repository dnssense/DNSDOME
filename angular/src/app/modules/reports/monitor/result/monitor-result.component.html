<div class="dns-base-card">
  <ng-container *ngIf="tableData && tableData.length>0; else elseTemplate">
    <div class="dns-base-card-content">
      <div class="dns-datatable-container container-fluid">

        <div class="row">
          <div class="col-11">
            <div class="dns-datatable-labels">
              <span *ngFor="let col of columns; let i = index;">
                <span class="dns-label" *ngIf="i < columnListLength" [ngClass]="{'dns-active' : col.checked}"
                  style="padding: 0px 4px 0 4px;" (click)="checkUncheckColumn(col)">
                  {{col.beautyName}}</span>
              </span>
              <ng-container *ngIf="columnListLength>12; else elseTemplate12">
                <button mat-raised-button class="btn btn-just-icon btn-link" id="shrinkButton"
                  (click)="changeColumnListLength()">
                  <span class="btn-label">
                    <i class="material-icons">fast_rewind</i>
                  </span>
                </button>
              </ng-container>
              <ng-template #elseTemplate12>
                <button mat-raised-button class="btn btn-just-icon btn-link" id="expandButton"
                  (click)="changeColumnListLength()">
                  <span class="btn-label">
                    <i class="material-icons">fast_forward</i>
                  </span>
                </button>
              </ng-template>
            </div>
          </div>
          <div class="col-1">
            <div class="dns-dropdown d-inline-block dns-table-select pull-right" id="dropdownExport"
              style="width: 120px;">
              <button class="btns dropdown-toggle text-left" type="button" id="dropdownMenuButtonExport"
                data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                Export As
                <i class="icon-down-open-big btn-arrow" style="font-size: 20px"></i>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButtonExport" x-placement="top-start"
                style="min-width: 120px !important;">
                <button class="dropdown-item" (click)="exportAs('xlsx')">
                  <i class="fa fa-table mr-3"></i> Excel
                </button>
                <button class="dropdown-item" (click)="exportAs('pdf')">
                  <i class="fa fa-file-pdf-o mr-3"></i> PDF
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="table-responsive col-md-12">
            <table class="table table-bordered" style="display: table;" id="resultContent" #resultContent>
              <thead>
                <th class="no-border"></th>
                <th nowrap style="border-bottom: white;" *ngFor="let col of selectedColumns">{{col.beautyName}}</th>
              </thead>
              <tr  *ngFor="let dat of tableData;  let i = index" [ngClass]="{'baseTableRow': i%2==0}">
                <td class="numeration"><small>
                    {{((this.currentPage-1)*searchSetting.topNumber)==0?i+1:((this.currentPage-1)*searchSetting.topNumber)+(i+1)}}
                  </small></td>
                <td nowrap *ngFor="let colName of selectedColumns"><small>
                    <a (click)="addColumnValueIntoSelectedValues(colName.name,dat[colName.name])"
                      *ngIf="(colName.name!= 'sourceIpCountryCode' && colName.name!='destinationIpCountryCode' && colName.name!='action'
                   && colName.name!='category' && colName.name!='applicationName' && colName.name != 'clientMacAddress' )">
                      <app-text-limit [text]="colName.name == 'time'?(dat[colName.name]| dateFormat):dat[colName.name]"
                        [limit]="colName.name == 'domain'|| colName.name=='subdomain'?100:40"></app-text-limit>
                    </a>
                    <a (click)="addColumnValueIntoSelectedValues(colName.name,dat[colName.name])"
                      *ngIf="(colName.name== 'sourceIpCountryCode' || colName.name=='destinationIpCountryCode' )">
                      <img src="/assets/img/flags/{{dat[colName.name]}}.png" class="flagImage" />
                      {{dat[colName.name] =='00'?'Local Domain':dat[colName.name] | countryPipe}}
                    </a>
                    <a (click)="addColumnValueIntoSelectedValues(colName.name,dat[colName.name])"
                      *ngIf="(colName.name== 'action' )">
                      {{dat[colName.name]? "Allow":"Block"}}
                    </a>
                    <a (click)="addColumnValueIntoSelectedValues(colName.name,dat[colName.name])"
                      *ngIf="colName.name== 'clientMacAddress'">
                      {{dat[colName.name] | MacAddressFormatterPipe}}
                    </a>
                    <a (click)="addColumnValueIntoSelectedValues(colName.name,dat[colName.name])"
                      *ngIf="(colName.name== 'applicationName' )">
                      {{dat[colName.name]}}
                    </a>
                    <ul class="mb-0" *ngIf="(colName.name== 'category' )" style="list-style: none;">
                      <li *ngFor="let ca of dat[colName.name]">
                        <a (click)="addColumnValueIntoSelectedValues(colName.name,ca)">
                          {{ca}}
                        </a>
                      </li>
                    </ul>
                  </small>
                </td>
              </tr>
              <!-- <tr>
                <td class="numeration" colspan="100" id="paginations">
                  
                </td>
              </tr> -->
            </table>
            <pagination [totalItems]="totalItems" [(ngModel)]="currentPage" (pageChanged)="pageChanged($event)"
              [boundaryLinks]="true" [maxSize]="maxSize" [itemsPerPage]="searchSetting.topNumber"></pagination>
          </div>
        </div>

      </div>
    </div>


  </ng-container>
  <ng-template #elseTemplate>
    <div class="row">
      <div class="col-md-12">
        <br />
        <p #tableDivComponent style="color: whitesmoke">
          <strong>{{ 'Data not found!' }}</strong>
        </p>
      </div>
    </div>
  </ng-template>

</div>