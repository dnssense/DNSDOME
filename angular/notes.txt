
projenin ilk yapılandırılması
$baseFolder=proje kök dizini

cd $baseFolder/angular
npm init

cd $baseFolder/fakeapi
npm init



projeyi start etmek için
cd $baseFolder/fakeapi
npm run
cd $baseFolder/angular
npm run start:proxy



////////////notlar/////////////////////////
development ortamı için api yönlendirmesi 
proxy.config.json dosyasından yapılır


sample proxy.config.json
 "/services/*": {
        "target": "http://localhost:8080",
        "secure": false,
        "changeOrigin": true
    }


Pozitif Security : Alan adlarını güvenlik seviyesine göre zararlı, zararsız ve bilinmeyen ( henüz sınıflandırılmamış) olarak 3 ana sınıfa ayrılır. Pozitif security modeli seçerek zero hour ataklarının kaynağı olan "bilinmeyen domainlere" karşı koruma sağlamış olursunuz. %99.9 sınıflandırma oranı ve 10 dk içerisinde sorgulanan bilinmeyen domainin sınıflandırması garantisi ile ağınızı en üst seviye korumaya alırken internet kullanım konforundan minimum taviz verirsiniz.

Negatif Security :Alan adlarını güvenlik seviyesine göre zararlı, zararsız ve bilinmeyen ( henüz sınıflandırılmamış) olarak 3 ana sınıfa ayrılır. Negatif security modeli seçerek zero hour ataklarının kaynağı olan "bilinmeyen domainlere" karşı korumasız kalırsınız.



package_docker_prod:
  image: node:12.14.1
  tags:
    - packager-runner
  stage: package
  script:
    - ssh root@$K8_PROD "docker pull $REGISTRY_DEV/$NS/$IMAGE:$VERSION"
    - ssh root@$K8_PROD "docker tag $REGISTRY_DEV/$NS/$IMAGE:$VERSION $REGISTRY_PROD/$NS/$IMAGE:$VERSION"
    - ssh root@$K8_PROD "docker push $REGISTRY_PROD/$NS/$IMAGE:$VERSION"
  only:
    refs:
      - master



deploy_k8_dev:
  tags:
    - deployer-runner
  stage: deploy
  script:
    - git clone git@gitlab:kube_conf/conf_test.git
    - cd conf_test
    - export CURRENTIMAGE=$(cat dnssense/$K8_FILE|grep "$REGISTRY_DEV/$NS/$IMAGE")
    - echo  "current  $CURRENTIMAGE"
    - export CURRENTVERSION=$(echo $CURRENTIMAGE|cut -d ":" -f 3)
    - export NEWIMAGE="${CURRENTIMAGE//$CURRENTVERSION/$VERSION}"
    - echo "new $NEWIMAGE"
    - sed -i "s/${CURRENTIMAGE//\//\\/}/${NEWIMAGE//\//\\/}/g" dnssense/$K8_FILE
    - cat dnssense/$K8_FILE
    - scp dnssense/$K8_FILE root@$K8_DEV:/tmp
    - ssh root@$K8_DEV "K8_FILE=$K8_FILE kubectl delete -f /tmp/$K8_FILE" || exit_code=$?
    - ssh root@$K8_DEV "K8_FILE=$K8_FILE kubectl apply -f /tmp/$K8_FILE"
    - git add . || exit_code=$?
    - git commit -m 'rest.calculate updated' || exit_code=$?
    - git push
  except:
    refs:
      - master


deploy_k8_prod:
  tags:
    - deployer-runner
  stage: deploy
  script:
    - git clone git@gitlab:kube_conf/conf_prod.git
    - cd conf_prod
    - export CURRENTIMAGE=$(cat dnssense/$K8_FILE|grep "$REGISTRY_PROD/$NS/$IMAGE")
    - echo  "current  $CURRENTIMAGE"
    - export CURRENTVERSION=$(echo $CURRENTIMAGE|cut -d ":" -f 3)
    - export NEWIMAGE="${CURRENTIMAGE//$CURRENTVERSION/$VERSION}"
    - echo "new $NEWIMAGE"
    - sed -i "s/${CURRENTIMAGE//\//\\/}/${NEWIMAGE//\//\\/}/g" dnssense/$K8_FILE
    - cat dnssense/$K8_FILE
    - scp dnssense/$K8_FILE root@$K8_PROD:/tmp
    - ssh root@$K8_PROD "K8_FILE=$K8_FILE kubectl apply -f /tmp/$K8_FILE"
    - git add . || exit_code=$?
    - git commit -m 'rest.calculate updated' || exit_code=$?
    - git push
  only:
    refs:
      - master


